<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href=https://heskeybaozi.github.io/static/favicon.ico>
    <title>工具&组件</title>
    <base target="_blank" />
    <style>
      /* 背景 */
      body {
        margin: 0;
        padding: 0;
      }
      #container {
        position: fixed;
        touch-action: none;
      }

      /* 工具栏 */
      .div_box{
        position: -webkit-sticky;
        position: fixed;
        top: 1%;
        height: 50px; width: 100%;
      }
      .div_box>div{
        position: relative;
        cursor: pointer;
        width: 10%; height: 50px;
        opacity: .3;
        float: left;
        transition:all .7s ease 0s;
      }
      .div_box>div:hover{
        position: relative;
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div id="container" touch-action="none"></div>
    
    <!-- ------------------ 工具箱 ------------------ -->
      <div class="div_box">
        <!-- 本地文件夹 -->
        <div>
          <a href="E:/" target="_blank"><svg viewBox="0 0 1024 1024" width="50" height="50"><path d="M425.0624 206.464c9.728 0 18.8672 4.4288 24.9088 11.904l2.1248 2.944 45.2864 71.424h242.3552c66.048 0 118.8608 55.5008 121.6512 123.9296l0.128 5.7344v281.6c0 69.12-51.0208 126.464-116.3008 129.536l-5.4784 0.1024H284.2624c-66.048 0-118.8608-55.4752-121.6512-123.904l-0.128-5.7344v-57.9328a32 32 0 0 1 63.8464-3.2512l0.1536 3.2512V704c0 35.3536 24.4224 63.3344 54.0416 65.5104l3.7376 0.128h455.4752c30.0288 0 55.6544-26.5472 57.6512-61.2608l0.128-4.3776v-281.6c0-35.3536-24.4224-63.3344-54.0416-65.5104l-3.7376-0.128H479.8208a32 32 0 0 1-24.9344-11.904l-2.0992-2.9696-45.3376-71.4496-110.5664 0.0256a70.4 70.4 0 0 0-70.272 66.0992l-0.128 4.3008v198.3232a32 32 0 0 1-63.8208 3.2768l-0.1792-3.2768v-198.3232a134.4 134.4 0 0 1 128.8704-134.2976l5.5296-0.1024h128.1792z" fill="#ff0000"></path><path d="M719.36 441.6a32 32 0 0 1 3.2768 63.8464l-3.2768 0.1536H304.64a32 32 0 0 1-3.2768-63.8464l3.2768-0.1536h414.72z" fill="#ff0000"></path></svg></path></svg></a>
        </div>
        <!-- 阿里云控制台 -->
        <div>
          <a href="https://homenew.console.aliyun.com/home/dashboard/Operation" target="_blank"><svg viewBox="0 0 1024 1024" width="50" height="50"><path fill="#ff6a00" d="M959.2 383.9c-0.3-82.1-66.9-148.6-149.1-148.6H575.9l21.6 85.2 201 43.7c18.3 4.2 32.1 20.3 32.9 39.7 0.1 0.5 0.1 216.1 0 216.6-0.8 19.4-14.6 35.5-32.9 39.7l-201 43.7-21.6 85.3h234.2c82.1 0 148.8-66.5 149.1-148.6V383.9zM225.5 660.4c-18.3-4.2-32.1-20.3-32.9-39.7-0.1-0.6-0.1-216.1 0-216.6 0.8-19.4 14.6-35.5 32.9-39.7l201-43.7 21.6-85.2H213.8c-82.1 0-148.8 66.4-149.1 148.6V641c0.3 82.1 67 148.6 149.1 148.6H448l-21.6-85.3-200.9-43.9z m200.9-158.8h171v21.3h-171z"/></svg></a>
        </div>
        <!-- Github -->
        <div>
          <a href="https://github.com/Deil12?tab=repositories" target="_blank"><svg viewBox="0 0 1024 1024" width="50" height="50"><path fill="#fff" d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"/></svg></a>
        </div>
        <!-- Gitee -->
        <div>
          <a href="https://gitee.com/deil12/projects" target="_blank"><svg viewBox="0 0 1024 1024" width="50" height="50"><path fill="#c71d23" d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z m259.168-568.896h-290.752a25.28 25.28 0 0 0-25.28 25.28l-0.032 63.232c0 13.952 11.296 25.28 25.28 25.28h177.024a25.28 25.28 0 0 1 25.28 25.28v12.64a75.84 75.84 0 0 1-75.84 75.84h-240.224a25.28 25.28 0 0 1-25.28-25.28v-240.192a75.84 75.84 0 0 1 75.84-75.84h353.92a25.28 25.28 0 0 0 25.28-25.28l0.064-63.2a25.312 25.312 0 0 0-25.28-25.312H417.184a189.632 189.632 0 0 0-189.632 189.6v353.952c0 13.952 11.328 25.28 25.28 25.28h372.928a170.656 170.656 0 0 0 170.656-170.656v-145.376a25.28 25.28 0 0 0-25.28-25.28z"/></svg></a>
        </div>
        <!-- 石墨笔记 -->
        <div>
          <a onclick="window.open('https://shimo.im/desktop')" title="石墨笔记"><svg viewBox="0 0 1024 1024" width="50" height="50"><path d="M223.94 831.74V615.55c0-17.06 13.83-30.88 30.88-30.88 17.06 0 30.88 13.83 30.88 30.88v216.18c0 17.06-13.83 30.88-30.88 30.88-17.05 0.01-30.88-13.82-30.88-30.87zM594.54 542.64H378.36c-17.06 0-30.88-13.83-30.88-30.88 0-17.06 13.83-30.88 30.88-30.88h216.18c17.06 0 30.88 13.83 30.88 30.88 0 17.05-13.82 30.88-30.88 30.88z" fill="#ff0000"></path><path d="M627.42 862.62H252.83c-15.95 0-28.89-12.93-28.89-28.89v-3.99c0-15.95 12.93-28.89 28.89-28.89h374.59c15.95 0 28.89 12.93 28.89 28.89v3.99c0 15.96-12.94 28.89-28.89 28.89zM328.95 635.28H180.71c-27.29 0-49.41-22.12-49.41-49.41V437.63c0-27.29 22.12-49.41 49.41-49.41h148.24c27.29 0 49.41 22.12 49.41 49.41v148.24c0 27.29-22.12 49.41-49.41 49.41z m-12.36-86.47v-74.12c0-13.65-11.06-24.71-24.71-24.71h-74.12c-13.65 0-24.71 11.06-24.71 24.71v74.12c0 13.65 11.06 24.71 24.71 24.71h74.12c13.65 0 24.71-11.06 24.71-24.71zM693.37 372.78v-92.65c0-17.06 13.83-30.88 30.88-30.88 17.06 0 30.88 13.83 30.88 30.88v92.65c0 17.06-13.83 30.88-30.88 30.88-17.06 0-30.88-13.83-30.88-30.88zM693.37 743.38v-92.65c0-17.06 13.83-30.88 30.88-30.88 17.06 0 30.88 13.83 30.88 30.88v92.65c0 17.06-13.83 30.88-30.88 30.88-17.06 0-30.88-13.83-30.88-30.88z" fill="#ff0000"></path><path d="M847.78 187.48c0 68.23-55.31 123.53-123.53 123.53S600.72 255.7 600.72 187.48 656.03 63.95 724.25 63.95s123.53 55.3 123.53 123.53z m-123.53-61.77c-34.11 0-61.77 27.65-61.77 61.77s27.65 61.77 61.77 61.77 61.77-27.65 61.77-61.77-27.66-61.77-61.77-61.77zM847.78 836.03c0 68.23-55.31 123.53-123.53 123.53s-123.53-55.31-123.53-123.53S656.03 712.5 724.25 712.5s123.53 55.3 123.53 123.53z m-123.53-61.77c-34.11 0-61.77 27.65-61.77 61.77s27.65 61.77 61.77 61.77 61.77-27.65 61.77-61.77-27.66-61.77-61.77-61.77zM689.31 657.95L584.49 553.13c-19.3-19.3-19.3-50.58 0-69.88l104.82-104.82c19.3-19.3 50.58-19.3 69.88 0l104.82 104.82c19.3 19.3 19.3 50.58 0 69.88L759.19 657.95c-19.3 19.29-50.58 19.29-69.88 0z m52.41-69.88l52.41-52.41c9.65-9.65 9.65-25.29 0-34.94l-52.41-52.41c-9.65-9.65-25.29-9.65-34.94 0l-52.41 52.41c-9.65 9.65-9.65 25.29 0 34.94l52.41 52.41c9.65 9.65 25.29 9.65 34.94 0z" fill="#ff0000"></path></svg></a>
        </div>
        <!-- ... -->
        <div>
          <a href="" target="_blank" title="..."><svg viewBox="0 0 1024 1024" width="50" height="50"><path d="M1009.319087 5.274069a31.995081 31.995081 0 0 0-35.194589 0l-959.852422 639.901615a31.995081 31.995081 0 0 0 5.759114 56.311342l250.201532 100.144603 117.741897 206.04832A31.995081 31.995081 0 0 0 416.13029 1023.99744a31.995081 31.995081 0 0 0 27.515769-15.677589l66.549768-110.70298 310.032333 124.140914A31.995081 31.995081 0 0 0 832.06634 1023.99744a31.995081 31.995081 0 0 0 31.99508-26.875867l159.975404-959.852423a31.995081 31.995081 0 0 0-14.717737-31.995081zM100.658794 665.012634L841.984815 170.688637l-539.117111 575.911453a63.990162 63.990162 0 0 0-8.638672-5.119213z m225.565319 105.263816L931.890992 121.096261 416.13029 926.092493z m479.926211 177.252747l-273.237989-109.423176a63.990162 63.990162 0 0 0-19.83695-3.839409L934.450598 182.206866z" fill="#ff0000"></path></svg></a>
        </div>
        <!-- musicTools -->
        <div>
          <a onclick="window.open('https://tool.yijingying.com/musictools/music/', 'fuckme', 'width=680, height=300, top=520')" title="musicToolsPlayer"><svg viewBox="0 0 1024 1024" width="50" height="50"><path fill="#fff" d="M742.3 100.3l-25.6 44.3c126.2 73 204.7 208.9 204.7 354.6 0 225.7-183.6 409.3-409.3 409.3S102.8 724.8 102.8 499.1c0-145.7 78.4-281.5 204.7-354.6l-25.6-44.3c-142 82.1-230.2 235-230.2 398.8 0 253.9 206.6 460.5 460.5 460.5S972.6 753 972.6 499.1c0-163.9-88.2-316.7-230.3-398.8z"></path><path fill="#f00" d="M464.2 437l-25.6-44.3c-45.3 26.2-73.5 75-73.5 127.3 0 81 65.9 147 147 147s147-65.9 147-147v-6.3L451.2 115.4h164V64.2H366.8l241 461.8c-3.1 50.1-44.8 89.9-95.6 89.9-52.8 0-95.8-43-95.8-95.8-0.1-34.1 18.2-66 47.8-83.1z"></path></svg></a>
        </div>
        <!-- natapp内网穿透 -->
        <div>
          <a href="https://natapp.cn/tunnel/lists" target="_blank" title="natapp内网穿透17521218462"><svg viewBox="0 0 1024 1024" width="50" height="50"><path d="M586.666667 437.333333c0 17.066667 14.933333 32 32 32h2.133333c8.533333-8.533333 19.2-14.933333 29.866667-21.333333 0-2.133333 2.133333-6.4 2.133333-10.666667v-170.666666c0-17.066667-14.933333-32-32-32h-181.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h149.333333v138.666666zM352 725.333333h-149.333333v-138.666666c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v170.666666c0 17.066667 14.933333 32 32 32h181.333333c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM245.333333 490.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32h-106.666666c-17.066667 0-32 14.933333-32 32S121.6 490.666667 138.666667 490.666667h106.666666zM567.466667 789.333333h-23.466667c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h76.8c-21.333333-19.2-38.4-40.533333-53.333333-64zM341.333333 341.333333v-128c0-23.466667-19.2-42.666667-42.666666-42.666666H85.333333c-23.466667 0-42.666667 19.2-42.666666 42.666666v128c0 23.466667 19.2 42.666667 42.666666 42.666667h213.333334c23.466667 0 42.666667-19.2 42.666666-42.666667zM533.333333 661.333333c0-46.933333 12.8-89.6 34.133334-128H490.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v128c0 23.466667 19.2 42.666667 42.666667 42.666667h57.6c-8.533333-27.733333-14.933333-55.466667-14.933334-85.333334zM789.333333 469.333333c-106.666667 0-192 85.333333-192 192s85.333333 192 192 192 192-85.333333 192-192-85.333333-192-192-192z m-128 93.866667c25.6 4.266667 61.866667 14.933333 87.466667 42.666667-10.666667 10.666667-19.2 21.333333-25.6 36.266666-17.066667-19.2-42.666667-29.866667-61.866667-34.133333v-44.8z m192 204.8v-23.466667c-19.2-2.133333-49.066667-8.533333-74.666666-25.6 6.4-10.666667 12.8-21.333333 17.066666-32 0-2.133333 2.133333-4.266667 2.133334-4.266666 17.066667 12.8 38.4 19.2 53.333333 21.333333v-21.333333l64 42.666666-61.866667 42.666667z m0-128v-14.933333c-23.466667 2.133333-61.866667 14.933333-76.8 53.333333-21.333333 59.733333-81.066667 78.933333-115.2 85.333333v-42.666666c25.6-6.4 61.866667-21.333333 76.8-55.466667 23.466667-61.866667 83.2-76.8 115.2-81.066667V554.666667l64 42.666666-64 42.666667z" fill="#ff0000"></path></svg></a>
        </div>
        <!-- v2rayN节点 -->
        <div>
          <a href="https://github.com/freefq/free/blob/master/v2" target="_blank" title="v2rayN节点更新"><svg viewBox="0 0 1024 1024" width="50" height="50"><path d="M535.466667 283.733333c0-17.066667-8.533333-25.6-25.6-27.733333h-25.6v53.333333h25.6c17.066667 0 25.6-8.533333 25.6-25.6zM832 640c46.933333 0 85.333333-38.4 85.333333-85.333333V192c0-46.933333-38.4-85.333333-85.333333-85.333333H192C145.066667 106.666667 106.666667 145.066667 106.666667 192v362.666667c0 46.933333 38.4 85.333333 85.333333 85.333333h288v64H448c-23.466667 0-42.666667 19.2-42.666667 42.666667H138.666667c-17.066667 0-32 14.933333-32 32S121.6 810.666667 138.666667 810.666667H405.333333c0 23.466667 19.2 42.666667 42.666667 42.666666h32v32c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V853.333333H576c23.466667 0 42.666667-19.2 42.666667-42.666666h266.666666c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32H618.666667c0-23.466667-19.2-42.666667-42.666667-42.666667h-32v-64H832z m-181.333333-85.333333c-17.066667 0-32-14.933333-32-32s14.933333-32 32-32 32 14.933333 32 32-14.933333 32-32 32z m-64-313.6c0-12.8 6.4-19.2 19.2-19.2 6.4 0 12.8 4.266667 17.066666 8.533333l81.066667 108.8v-96c0-12.8 6.4-19.2 19.2-19.2 12.8 0 19.2 6.4 19.2 19.2v145.066667c0 12.8-6.4 17.066667-19.2 17.066666-6.4 0-12.8-2.133333-17.066667-6.4l-81.066666-106.666666v96c0 12.8-6.4 17.066667-19.2 17.066666s-19.2-6.4-19.2-17.066666v-147.2zM373.333333 554.666667c-17.066667 0-32-14.933333-32-32s14.933333-32 32-32 32 14.933333 32 32-14.933333 32-32 32z m59.733334-305.066667l-55.466667 142.933333c-4.266667 8.533333-10.666667 12.8-19.2 12.8s-14.933333-4.266667-19.2-12.8l-55.466667-142.933333v-8.533333c0-12.8 6.4-19.2 19.2-19.2 6.4 0 12.8 4.266667 17.066667 12.8l40.533333 106.666666 38.4-106.666666c4.266667-8.533333 10.666667-12.8 17.066667-12.8 12.8 2.133333 19.2 8.533333 19.2 19.2 0 2.133333 0 4.266667-2.133333 8.533333z m32 155.733333c-12.8 0-19.2-6.4-19.2-17.066666v-145.066667c0-12.8 6.4-19.2 19.2-19.2H512c40.533333 2.133333 61.866667 23.466667 64 61.866667-2.133333 38.4-23.466667 57.6-64 61.866666h-27.733333v42.666667c0 8.533333-6.4 14.933333-19.2 14.933333z m46.933333 149.333334c-17.066667 0-32-14.933333-32-32S494.933333 490.666667 512 490.666667s32 14.933333 32 32S529.066667 554.666667 512 554.666667z" fill="#ff0000"></path></svg></a>
        </div>
        <!-- 网易云 -->
        <div style="align-items: center;">
          <a href="https://music.163.com/#/my/m/music/playlist?id=147847032" target="_blank"><svg height="50" width="50" viewBox="0 0 1024 1024"><path fill="#f00" d="M952.17867 503.263237a341.054956 341.054956 0 0 0-56.853199-113.706399 408.604266 408.604266 0 0 0-109.723463-98.352823 304.662484 304.662484 0 0 0-143.257215-42.077792L621.305897 170.238394a40.343287 40.343287 0 0 1 10.792472-36.392472 56.88532 56.88532 0 0 1 36.392472-18.758344 102.785445 102.785445 0 0 1 56.853199 18.758344c6.263488 3.404768 10.792472 9.090088 17.05596 13.073024a57.335006 57.335006 0 0 0 82.999247-70.632873 66.521455 66.521455 0 0 0-22.74128-27.848432 237.691343 237.691343 0 0 0-89.262735-43.202007A170.559598 170.559598 0 0 0 625.288833 6.42409a167.026349 167.026349 0 0 0-60.836135 37.516688 164.328231 164.328231 0 0 0-40.921456 51.713927 156.908407 156.908407 0 0 0-8.54404 113.706399l13.651192 52.870264a284.298118 284.298118 0 0 0-158.064743 109.209535 256.963614 256.963614 0 0 0-43.202007 156.908407 248.419573 248.419573 0 0 0 13.651192 74.487327 205.281807 205.281807 0 0 0 80.718695 104.616312 185.945295 185.945295 0 0 0 136.447679 25.696361 193.879046 193.879046 0 0 0 156.330238-196.705646L708.802008 503.263237c-11.948808-46.060728-24.443664-91.543287-35.814304-137.025847a182.283563 182.283563 0 0 1 47.763112 18.180176 316.611292 316.611292 0 0 1 47.763111 34.690088A239.907654 239.907654 0 0 1 840.752823 529.987453a284.169636 284.169636 0 0 1 0 158.064743 252.241907 252.241907 0 0 1-21.584943 51.167879 308.741782 308.741782 0 0 1-168.279047 144.542033 387.918695 387.918695 0 0 1-130.184191 23.319448 332.607277 332.607277 0 0 1-155.206022-37.516688A367.233124 367.233124 0 0 1 194.87478 672.666499a373.014806 373.014806 0 0 1-20.460727-180.806022A366.173149 366.173149 0 0 1 406.869762 198.536512a57.399247 57.399247 0 0 0 13.073023-100.055207 76.189711 76.189711 0 0 0-63.662735-3.404768A479.815307 479.815307 0 0 0 68.705646 436.163614a488.905395 488.905395 0 0 0 129.027855 450.84266 454.857716 454.857716 0 0 0 248.997741 131.886574 470.885822 470.885822 0 0 0 138.117942 0A454.889837 454.889837 0 0 0 773.042911 952.949561a427.523212 427.523212 0 0 0 170.559598-209.232622 417.276788 417.276788 0 0 0 22.74128-109.209536 378.089837 378.089837 0 0 0-14.165119-131.244166z m-412.747804 118.845671a72.174655 72.174655 0 0 1-56.8532-10.792471 98.352823 98.352823 0 0 1-37.516687-61.382184 170.68808 170.68808 0 0 1 0-65.943287 133.042911 133.042911 0 0 1 33.533751-63.662735 181.35207 181.35207 0 0 1 80.718695-46.606776l39.219072 148.364367a204.189711 204.189711 0 0 1 5.107152 26.146048 79.594479 79.594479 0 0 1-64.208783 73.844918z"></path></svg></a>
        </div>
      </div>

        <!--   播放器  -->
    <!-- require APlayer -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
    <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
    <!-- require MetingJS -->
    <script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    <meting-js style="text-align: left; color: red;"
            auto="https://music.163.com/#/playlist?id=974002346"
            fixed="true"
            autoplay="false"
            order="random"
    ></meting-js>
  </body>

  <!-- 背景 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/88/three.min.js"></script>
  <script id="vertexShader" type="x-shader/x-vertex">
    void main() {
        gl_Position = vec4( position, 1.0 );
    }
  </script>
  <script id="fragmentShader" type="x-shader/x-fragment">
    uniform vec2 u_resolution;
    uniform vec2 u_mouse;
    uniform float u_time;
    uniform sampler2D u_noise;

    #define PI 3.141592653589793
    #define TAU 6.

    const float multiplier = 25.5;

    const float zoomSpeed = 10.;
    const int layers = 10;

    const int octaves = 5;

    vec2 hash2(vec2 p)
    {
      vec2 o = texture2D( u_noise, (p+0.5)/256.0, -100.0 ).xy;
      return o;
    }

    mat2 rotate2d(float _angle){
        return mat2(cos(_angle),sin(_angle),
                    -sin(_angle),cos(_angle));
    }

    vec3 hsb2rgb( in vec3 c ){
      vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),
                               6.0)-3.0)-1.0,
                       0.0,
                       1.0 );
      rgb = rgb*rgb*(3.0-2.0*rgb);
      return c.z * mix( vec3(1.0), rgb, c.y);
    }

    float hash(vec2 p)
    {
      float o = texture2D( u_noise, (p+0.5)/256.0, -100.0 ).x;
      return o;
    }
    float noise(vec2 uv) {
      vec2 id = floor(uv);
      vec2 subuv = fract(uv);
      vec2 u = subuv * subuv * (3. - 2. * subuv);
      float a = hash(id);
      float b = hash(id + vec2(1., 0.));
      float c = hash(id + vec2(0., 1.));
      float d = hash(id + vec2(1., 1.));
      return mix(mix(a, b, u.x), mix(c, d, u.x), u.y);
    }
    float fbm(in vec2 uv) {
      float s = .0;
      float m = .0;
      float a = .5;
      for(int i = 0; i < octaves; i++) {
        s += a * noise(uv);
        m += a;
        a *= .5;
        uv *= 2.;
      }
      return s / m;
    }

    vec3 domain(vec2 z){
      return vec3(hsb2rgb(vec3(atan(z.y,z.x)/TAU,1.,1.)));
    }
    vec3 colour(vec2 z) {
        return domain(z);
    }

    // The render function is where we render the pattern to be added to the layer
    vec3 render(vec2 uv, float scale, vec3 colour) {
      vec2 id = floor(uv);
      vec2 subuv = fract(uv);
      vec2 rand = hash2(id);
      float bokeh = abs(scale) * 1.;

      float particle = 0.;

      if(length(rand) > 1.3) {
        vec2 pos = subuv-.5;
        float field = length(pos);
        particle = smoothstep(.3, 0., field);
        particle += smoothstep(.4, 0.34 * bokeh, field);
      }
      return vec3(particle*2.);
    }

    vec3 renderLayer(int layer, int layers, vec2 uv, inout float opacity, vec3 colour, float n) {
      vec2 _uv = uv;
      // Scale
      // Generating a scale value between zero and 1 based on a mod of u_time
      // A frequency of 10 dixided by the layer index (10 / layers * layer)
      float scale = mod((u_time + zoomSpeed / float(layers) * float(layer)) / zoomSpeed, -1.);
      uv *= 20.; // The initial scale. Increasing this makes the cells smaller and the "speed" apepar faster
      uv *= scale*scale; // then modifying the overall scale by the generated amount
      // uv *= 1. + ( ( n*.5 ) * ( length(_uv) ) );
      // uv += .5*float(layer);
      uv = rotate2d(u_time / 10.) * uv; // rotarting
      uv += vec2(25. + sin(u_time*.1)) * float(layer); // ofsetting the UV by an arbitrary amount to make the layer appear different

      // render
      vec3 pass = render(uv * multiplier, scale, colour) * .2; // render the pass

       // this is the opacity of the layer fading in from the "bottom"
      opacity = 1. + scale;
      float _opacity = opacity;

      // pass += n * .5 * mix(vec3(0., .5, 1.5), vec3(1., .5, 0.), opacity);

      // This is the opacity of the layer fading out at the top (we want this minimal, hence the smoothstep)
      float endOpacity = smoothstep(0., 0.4, scale * -1.);
      opacity += endOpacity;

      return pass * _opacity * endOpacity;
    }

    void main() {
        vec2 uv = (gl_FragCoord.xy - 0.5 * u_resolution.xy);

        if(u_resolution.y < u_resolution.x) {
          uv /= u_resolution.y;
        } else {
          uv /= u_resolution.x;
        }

        // uv.y += cos(u_time * .1) * .5;
        // uv.x += sin(u_time * .1) * .5;

        // float n = fbm(uv * 3. - 2.);
        float n = fbm((uv + vec2(sin(u_time*.1), u_time*.1)) * 2. - 2.);

        vec3 colour = vec3(0.);
        // colour = n * mix(vec3(0., .5, 1.5), vec3(1., .5, -.1), n);
        colour = n * mix(vec3(0., .5, 1.5), clamp(vec3(1., .5, .25)*2., 0., 1.), n);
        // colour -= n*n*n*n*.4;
        // colour += smoothstep(.8, 2.5, sin(n*n*n*8.))*.4;

        float opacity = 1.;
        float opacity_sum = 1.;

        for(int i = 1; i <= layers; i++) {
          colour += renderLayer(i, layers, uv, opacity, colour, n);
          opacity_sum += opacity;
        }

        colour /= opacity_sum;

        gl_FragColor = vec4(clamp(colour * 20., 0., 1.),1.0);
    }
  </script>
  <script>
    // 背景
    /*
    Most of the stuff in here is just bootstrapping. Essentially it's just
    setting ThreeJS up so that it renders a flat surface upon which to draw 
    the shader. The only thing to see here really is the uniforms sent to 
    the shader. Apart from that all of the magic happens in the HTML view
    under the fragment shader.
    */
    let container;
    let camera, scene, renderer;
    let uniforms;
    let loader = new THREE.TextureLoader();
    let texture;
    loader.setCrossOrigin("anonymous");
    loader.load(
      "https://s3-us-west-2.amazonaws.com/s.cdpn.io/982762/noise.png",
      function do_something_with_texture(tex) {
        texture = tex;
        texture.wrapS = THREE.RepeatWrapping;
        texture.wrapT = THREE.RepeatWrapping;
        texture.minFilter = THREE.LinearFilter;
        init();
        animate();
      }
    );
    function init() {
      container = document.getElementById("container");
      camera = new THREE.Camera();
      camera.position.z = 1;
      scene = new THREE.Scene();
      var geometry = new THREE.PlaneBufferGeometry(2, 2);
      uniforms = {
        u_time: { type: "f", value: 1.0 },
        u_resolution: { type: "v2", value: new THREE.Vector2() },
        u_noise: { type: "t", value: texture },
        u_mouse: { type: "v2", value: new THREE.Vector2() },
      };
      var material = new THREE.ShaderMaterial({
        uniforms: uniforms,
        vertexShader: document.getElementById("vertexShader").textContent,
        fragmentShader: document.getElementById("fragmentShader").textContent,
      });
      material.extensions.derivatives = true;
      var mesh = new THREE.Mesh(geometry, material);
      scene.add(mesh);
      renderer = new THREE.WebGLRenderer();
      renderer.setPixelRatio(window.devicePixelRatio);
      container.appendChild(renderer.domElement);
      onWindowResize();
      window.addEventListener("resize", onWindowResize, false);
      document.addEventListener("pointermove", (e) => {
        let ratio = window.innerHeight / window.innerWidth;
        uniforms.u_mouse.value.x =
          (e.pageX - window.innerWidth / 2) / window.innerWidth / ratio;
        uniforms.u_mouse.value.y =
          ((e.pageY - window.innerHeight / 2) / window.innerHeight) * -1;
        e.preventDefault();
      });
    }
    function onWindowResize(event) {
      renderer.setSize(window.innerWidth, window.innerHeight);
      uniforms.u_resolution.value.x = renderer.domElement.width;
      uniforms.u_resolution.value.y = renderer.domElement.height;
    }
    function animate(delta) {
      requestAnimationFrame(animate);
      render(delta);
    }
    let capturer = new CCapture({
      verbose: true,
      framerate: 60,
      // motionBlurFrames: 4,
      quality: 90,
      format: "webm",
      workersPath: "js/",
    });
    let capturing = false;
    isCapturing = function (val) {
      if (val === false && window.capturing === true) {
        capturer.stop();
        capturer.save();
      } else if (val === true && window.capturing === false) {
        capturer.start();
      }
      capturing = val;
    };
    toggleCapture = function () {
      isCapturing(!capturing);
    };
    window.addEventListener("keyup", function (e) {
      if (e.keyCode == 68) toggleCapture();
    });
    let then = 0;
    function render(delta) {
      uniforms.u_time.value = -10000 + delta * 0.0005;
      renderer.render(scene, camera);
      if (capturing) {
        capturer.capture(renderer.domElement);
      }
    }
  </script>
</html>
